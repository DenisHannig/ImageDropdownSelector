var ImageSelector={onSelectListeners:{},init:function(e){imageSelectorHelper.each(e,function(e,t){var i=imageSelectorHelper.findAllOptions(t),o="";imageSelectorHelper.each(i,function(e,t){var i=t.id||"",n=t.hasAttribute("title")?t.getAttribute("title"):"",r=t.hasAttribute("image")?t.getAttribute("image"):null,l=ImageSelector.createOption(i,n,r);o+=l});var n=ImageSelector.template(o);imageSelectorHelper.html(t,n),t.getAttribute("id")||t.setAttribute("id","image-selector-"+e),ImageSelector.getItemCount(t)>0&&(t.systemCall=!0,ImageSelector.setSelectedIndex(t,0)),ImageSelector.setupEventListeners(t)})},setSelectedIndex:function(e,t){var i=imageSelectorHelper.findAllOptions(e);if(!(i&&i.length>0&&t<=i.length))throw new Error("Options index out of range for index ["+t+"]. (Available items [imageSelectorHelper{options.length}]");i[t].systemCall=!0===e.systemCall,ImageSelector.setSelectedOption(i[t]),e.systemCall=void 0},setSelectedOptionById:function(e,t){e.systemCall=void 0!==e.systemCall;var i=imageSelectorHelper.findOptionById(e,t);i&&(i.systemCall=e.systemCall,ImageSelector.setSelectedOption(i))},setSelectedOption:function(e){e.systemCall=void 0!==e.systemCall;var t=imageSelectorHelper.findClosestSelector(e),i=t.getAttribute("id"),o=imageSelectorHelper.findCurrentSelection(t),n=document.createElement("span");n.classList.add("image-selector-selection"),n.innerHTML=e.innerHTML,n.id=e.getAttribute("id");var r=t.hasAttribute("idAsSelectedText")?n.id:n.title;if(imageSelectorHelper.text(n.querySelector(".image-selector-option-text"),r),o.outerHTML=n.outerHTML,this.onSelectListeners[i]&&!0!==e.systemCall){var l=ImageSelector.getIndexOf(e);this.onSelectListeners[i](l,e)}e.systemCall=void 0},setOnSelectListener:function(e,t,i){if(imageSelectorHelper.isFunction(t)){var o=e.getAttribute("id");ImageSelector.onSelectListeners[o]?!0===i&&(ImageSelector.onSelectListeners[o]=t):ImageSelector.onSelectListeners[o]=t}},getItemCount:function(e){return e?imageSelectorHelper.findAllOptions(e).length:-1},getCurrentSelected:function(e){var t=imageSelectorHelper.findCurrentSelection(e);if(t){var i=t.getAttribute("id");return imageSelectorHelper.findOptionsList(e).querySelector('.image-selector-option[id="'+i+'"]')}return null},getCurrentSelectedIndex:function(e){var t=ImageSelector.getCurrentSelected(e);return t?ImageSelector.getIndexOf(t):-1},getIndexOf:function(e){var t=-1,i=imageSelectorHelper.findClosestSelector(e);if(e&&i){var o=imageSelectorHelper.findAllOptions(i);return imageSelectorHelper.each(o,function(i,o){e.id===o.id&&(t=i)}),t}},setupEventListeners:function(e){var t=imageSelectorHelper.findOptionsList(e);imageSelectorHelper.offOn("mouseup",e.querySelector(".image-selector"),function(i){if(i.stopPropagation(),imageSelectorHelper.toggleClass(e,"expanded",!ImageSelector.isExpanded(e)),t){var o=imageSelectorHelper.isOutOfViewport(t,!0);!0===o.top&&(t.style.top=0),!0===o.right&&(t.style.right=0),!0===o.bottom&&(t.style.bottom=0),!0===o.left&&(t.style.left=0)}});t=imageSelectorHelper.findOptionsList(e);imageSelectorHelper.offOn("mouseleave",e,function(i){if(ImageSelector.isExpanded(e)&&(i.stopPropagation(),ImageSelector.collapseAllImageSelectors(),t))imageSelectorHelper.isOutOfViewport(t,!0)}),imageSelectorHelper.offOn("mouseup",imageSelectorHelper.findAllOptions(e),function(e){e.stopPropagation(),ImageSelector.setSelectedOption(this),ImageSelector.collapseAllImageSelectors()})},isExpanded:function(e){return e.classList.contains("expanded")},collapseAllImageSelectors:function(){var e=imageSelectorHelper.findAllImageSelectors();imageSelectorHelper.toggleClass(e,"expanded",!1)},template:function(e){return'<style>   image-selector {\t   display: block;\t   margin: auto;\t   font-size: 12px;   }   .image-selector {\t   min-width: 40px;\t   height: auto;\t   background-color: #f0f0f0;\t   border-radius: 4px;\t   display: flex;\t   flex-direction: row;\t   border: 1px solid #c5c5c5;   }   .image-selector:hover {\t   cursor: pointer;   }   .image-selector.disabled:hover {\t   cursor: default;   }   .image-selector-selection-image {\t   width: 18px;\t   height: 18px;\t   flex: none;   }   .image-selector-selection-text {\t   text-overflow: ellipsis;\t   overflow: hidden;\t   margin: auto;\t   min-height: 18px;   }   .image-selector-selection {\t   width: auto;\t   min-width: 40px;\t   height: auto;\t   display: flex;\t   flex: auto;\t   margin: auto;\t   padding: 4px 10px;\t   line-height: normal;\t   white-space: nowrap;\t   overflow: hidden;\t   text-overflow: ellipsis;\t   user-select: none;   }   .image-selector-arrow {\t   width: 18px;\t   height: 18px;\t   margin: auto;\t   flex: none;\t   border-left: 1px solid #c5c5c5;\t   background-size: 50% auto;\t   background-position: center;\t   background-repeat: no-repeat;   }\t   image-selector:not(.expanded):hover .image-selector-arrow {\t   background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiM4MDgwODAiPjxwb2x5Z29uIHBvaW50cz0iMCwwIDEwMCwwIDUwLDUwIj48L3BvbHlnb24+PC9zdmc+");   }   image-selector:not(.expanded) .image-selector-arrow {\t   background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiUyMzgwODA4MCI+PHBvbHlnb24gcG9pbnRzPSIwLDAgMTAwLDAgNTAsNTAiPjwvcG9seWdvbj48L3N2Zz4=");   }\t   image-selector.expanded:hover .image-selector-arrow {\t   background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMDAnIGhlaWdodD0nNTAnIGZpbGw9JyM4MDgwODAnPjxwb2x5Z29uIHBvaW50cz0nNTAsMCAxMDAsNTAgMCw1MCcvPjwvc3ZnPg==");   }   image-selector.expanded .image-selector-arrow {\t   background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMDAnIGhlaWdodD0nNTAnIGZpbGw9JyM1MDUwNTAnPjxwb2x5Z29uIHBvaW50cz0nNTAsMCAxMDAsNTAgMCw1MCcvPjwvc3ZnPg==");   }   /* LIST */   .image-selector-options-list {\t   position: fixed;\t   z-index: 599;\t   height: auto;\t   max-height: 300px;\t   margin-top: -1px;\t   background-color: #f8f8f8;\t   border: 1px solid #c5c5c5;\t   border-radius: 4px;\t   display: none;\t   overflow: auto;   }   image-selector.expanded .image-selector-options-list {\t   display: block;   }   .image-selector-option {\t   width: auto;\t   min-width: 40px;\t   height: auto;\t   display: flex;\t   flex: auto;\t   margin: auto;\t   padding: 4px 10px;\t   line-height: normal;\t   white-space: nowrap;\t   user-select: none;\t   cursor: pointer;   }   .image-selector-option:hover {\t   background-color: #f0f0f0;   }   .image-selector-option-image {\t   width: 18px;\t   height: 18px;\t   flex: none;\t   margin-top: auto;\t   margin-bottom: auto;   }   .image-selector-option-text {\t   margin: auto auto auto 0;\t   line-height: 18px;   }   .image-selector-css-hidden {       display: none !important;   }   .image-selector-css-mr-10 {       margin-right: 10px;   }</style><div class="image-selector">   <span class="image-selector-selection">\t   <div class="image-selector-option-image"></div>\t   <span class="image-selector-selection-text"></span>   </span>   <div class="image-selector-arrow"></div></div><span class="image-selector-options-list">\t '+e+"</span>"},createOption:function(e,t,i){return'<div class="image-selector-option" id="'+e+(t?'" title="'+t:"")+(i?'" image="'+i:"")+'">'+(i?'    <img class="image-selector-option-image '+(t?"image-selector-css-mr-10":"")+'" src="'+i+'" alt="'+e.toUpperCase()+'" onerror="this.style.opacity=\'0\'"/>':"")+'    <span class="image-selector-option-text '+(t?"":"image-selector-css-hidden ")+'">'+t+"</span></div>"},createOptionBeforeInit:function(e,t,i){return'<image-option id="'+e+(t?'" title="'+t:"")+(i?'" image="'+i:"")+'"></image-option>'},addOptionItems:function(e,t){imageSelectorHelper.html(e,t),ImageSelector.init([e])}};document.addEventListener("DOMContentLoaded",function(e){ImageSelector.init(imageSelectorHelper.findAllImageSelectors())});var _ImageSelectorHelper=new function(){return{isOutOfViewport:function(e,t){var i=e.getBoundingClientRect(),o={};return o.top=i.top<0,o.left=i.left<0,o.bottom=i.bottom>(window.innerHeight||document.documentElement.clientHeight),o.right=i.right>(window.innerWidth||document.documentElement.clientWidth),o.any=o.top||o.left||o.bottom||o.right,o.all=o.top&&o.left&&o.bottom&&o.right,t&&(e.style.top="",e.style.right="",e.style.bottom="",e.style.left=""),o},isFunction:function(e){return e&&"function"==typeof e},toggleClass:function(e,t,i){e&&e.length&&e.length>0?imageSelectorHelper.each(e,function(e,o){i?o.classList.contains(t)||o.classList.add(t):o.classList.remove(t)}):e&&e.classList&&(i?e.classList.contains(t)||e.classList.add(t):e.classList.remove(t))},each:function(e,t){if(e&&"function"==typeof t)for(var i=0;i<e.length;i++)t(i,e[i])},eventsHandler:function(e,t,i,o){if(i&&!Array.isArray(i)&&!NodeList.prototype.isPrototypeOf(i)){var n=[];n.push(i),i=n}var r=t.split(" ");imageSelectorHelper.each(r,function(t,n){imageSelectorHelper.each(i,function(t,i){"addEventListener"===e?i.attachEvent?(i["e"+n+o]=o,i[n+o]=function(){i["e"+n+o](window.event)},i.attachEvent("on"+n,i[n+o])):i.addEventListener(n,o,!1):"removeEventListener"===e&&(i.detachEvent?(i["e"+n+o]=o,i[n+o]=function(){i["e"+n+o](window.event)},i.attachEvent("on"+n,i[n+o])):i.removeEventListener(n,o,!1))})})},off:function(e,t,i){this.eventsHandler("removeEventListener",e,t,i)},on:function(e,t,i){this.eventsHandler("addEventListener",e,t,i)},offOn:function(e,t,i){this.off(e,t,i),this.on(e,t,i)},html:function(e,t){if(!t)return e.innerHTML;e.innerHTML=t},text:function(e,t){if(!t)return e.innerText;e.innerText=t},findAllImageSelectors:function(){return document.querySelectorAll("image-selector")},findAllOptions:function(e){if(!e)return null;var t=e.querySelectorAll("image-option");return t=t&&t.length>0?t:e.querySelectorAll(".image-selector-option")},findOptionById:function(e,t){if(!e)return null;var i=e.querySelectorAll('image-option[id="'+t+'"]');return(i=i&&i.length>0?i:e.querySelector('.image-selector-option[id="'+t+'"]'))&&i.length>0&&(i=i[0]),i},findClosestSelector:function(e){return e&&"image-selector"===e.tagName.toLowerCase()?e:e&&e.parentNode?this.findClosestSelector(e.parentNode):void 0},findOptionsList:function(e){var t=e.querySelectorAll(".image-selector-options-list");return t.length>0?t[0]:null},findCurrentSelection:function(e){return e.querySelector(".image-selector-selection")}}},imageSelectorHelper=_ImageSelectorHelper;
