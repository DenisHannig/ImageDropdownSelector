var ImageSelector={onSelectListeners:{},init:function(e){imageSelectorHelper.each(e,function(e,t){var o=imageSelectorHelper.findAllOptions(t),i="";imageSelectorHelper.each(o,function(e,t){var o=t.id||"",n=t.hasAttribute("title")?t.getAttribute("title"):"",r=t.hasAttribute("image")?t.getAttribute("image"):null,l=ImageSelector.createOption(o,n,r);i+=l});var n=ImageSelector.template(i);imageSelectorHelper.html(t,n),t.getAttribute("id")||t.setAttribute("id","image-selector-"+e),ImageSelector.getItemCount(t)>0&&(t.systemCall=!0,ImageSelector.setSelectedIndex(t,0)),ImageSelector.setupEventListeners(t)})},setSelectedIndex:function(e,t){var o=imageSelectorHelper.findAllOptions(e);if(!(o&&o.length>0&&t<=o.length))throw new Error("Options index out of range for index ["+t+"]. (Available items [imageSelectorHelper{options.length}]");o[t].systemCall=!0===e.systemCall,ImageSelector.setSelectedOption(o[t]),e.systemCall=void 0},setSelectedOptionById:function(e,t){e.systemCall=void 0!==e.systemCall;var o=imageSelectorHelper.findOptionById(e,t);o&&(o.systemCall=e.systemCall,ImageSelector.setSelectedOption(o))},setSelectedOption:function(e){e.systemCall=void 0!==e.systemCall;var t=imageSelectorHelper.findClosestSelector(e),o=imageSelectorHelper.findCurrentSelection(t),i=document.createElement("span");i.classList.add("image-selector-selection"),i.innerHTML=e.innerHTML,i.id=e.getAttribute("id");var n=t.hasAttribute("idAsSelectedText")?i.id.toUpperCase():i.title;if(imageSelectorHelper.text(i.querySelector(".image-selector-option-text"),n),o.outerHTML=i.outerHTML,this.onSelectListeners[t]&&!0!==e.systemCall){var r=ImageSelector.getIndexOf(e);this.onSelectListeners[t](r,e)}e.systemCall=void 0},setOnSelectListener:function(e,t,o){imageSelectorHelper.isFunction(t)&&(ImageSelector.onSelectListeners[e]?!0===o&&(ImageSelector.onSelectListeners[e]=t):ImageSelector.onSelectListeners[e]=t)},getItemCount:function(e){return imageSelectorHelper.findAllOptions(e).length},getCurrentSelected:function(e){var t=imageSelectorHelper.findCurrentSelection(e);if(t){var o=t.getAttribute("id");return imageSelectorHelper.findOptionsList(e).querySelector('.image-selector-option[id="'+o+'"]')}return null},getCurrentSelectedIndex:function(e){var t=ImageSelector.getCurrentSelected(e);return t?ImageSelector.getIndexOf(t):-1},getIndexOf:function(e){var t=-1,o=imageSelectorHelper.findClosestSelector(e);if(e&&o){var i=imageSelectorHelper.findAllOptions(o);return imageSelectorHelper.each(i,function(o,i){e.id===i.id&&(t=o)}),t}},setupEventListeners:function(e){var t=imageSelectorHelper.findOptionsList(e);imageSelectorHelper.offOn("mouseup",e.querySelector(".image-selector"),function(o){if(o.stopPropagation(),imageSelectorHelper.toggleClass(e,"expanded",!ImageSelector.isExpanded(e)),t){var i=imageSelectorHelper.isOutOfViewport(t,!0);!0===i.top&&(t.style.top=0),!0===i.right&&(t.style.right=0),!0===i.bottom&&(t.style.bottom=0),!0===i.left&&(t.style.left=0)}});t=imageSelectorHelper.findOptionsList(e);imageSelectorHelper.offOn("mouseleave",e,function(o){if(ImageSelector.isExpanded(e)&&(o.stopPropagation(),ImageSelector.collapseAllImageSelectors(),t))imageSelectorHelper.isOutOfViewport(t,!0)}),imageSelectorHelper.offOn("mouseup",imageSelectorHelper.findAllOptions(e),function(e){e.stopPropagation(),ImageSelector.setSelectedOption(this),ImageSelector.collapseAllImageSelectors()})},isExpanded:function(e){return e.classList.contains("expanded")},collapseAllImageSelectors:function(){var e=imageSelectorHelper.findAllImageSelectors();imageSelectorHelper.toggleClass(e,"expanded",!1)},template:function(e){return'<style>   image-selector {\t   display: block;\t   margin: auto;\t   font-size: 12px;   }   .image-selector {\t   min-width: 40px;\t   height: auto;\t   background-color: #f0f0f0;\t   border-radius: 4px;\t   display: flex;\t   flex-direction: row;\t   border: 1px solid #c5c5c5;   }   .image-selector:hover {\t   cursor: pointer;   }   .image-selector.disabled:hover {\t   cursor: default;   }   .image-selector-selection-image {\t   width: 18px;\t   height: 18px;\t   flex: none;   }   .image-selector-selection-text {\t   text-overflow: ellipsis;\t   overflow: hidden;\t   margin: auto;\t   min-height: 18px;   }   .image-selector-selection {\t   width: auto;\t   min-width: 40px;\t   height: auto;\t   display: flex;\t   flex: auto;\t   margin: auto;\t   padding: 4px 10px;\t   line-height: normal;\t   white-space: nowrap;\t   overflow: hidden;\t   text-overflow: ellipsis;\t   user-select: none;   }   .image-selector-arrow {\t   width: 18px;\t   height: 18px;\t   margin: auto;\t   flex: none;\t   border-left: 1px solid #c5c5c5;\t   background-size: 50% auto;\t   background-position: center;\t   background-repeat: no-repeat;   }\t   image-selector:not(.expanded):hover .image-selector-arrow {\t   background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiM4MDgwODAiPjxwb2x5Z29uIHBvaW50cz0iMCwwIDEwMCwwIDUwLDUwIj48L3BvbHlnb24+PC9zdmc+");   }   image-selector:not(.expanded) .image-selector-arrow {\t   background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiUyMzgwODA4MCI+PHBvbHlnb24gcG9pbnRzPSIwLDAgMTAwLDAgNTAsNTAiPjwvcG9seWdvbj48L3N2Zz4=");   }\t   image-selector.expanded:hover .image-selector-arrow {\t   background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMDAnIGhlaWdodD0nNTAnIGZpbGw9JyM4MDgwODAnPjxwb2x5Z29uIHBvaW50cz0nNTAsMCAxMDAsNTAgMCw1MCcvPjwvc3ZnPg==");   }   image-selector.expanded .image-selector-arrow {\t   background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMDAnIGhlaWdodD0nNTAnIGZpbGw9JyM1MDUwNTAnPjxwb2x5Z29uIHBvaW50cz0nNTAsMCAxMDAsNTAgMCw1MCcvPjwvc3ZnPg==");   }   /* LIST */   .image-selector-options-list {\t   position: fixed;\t   z-index: 599;\t   height: auto;\t   max-height: 300px;\t   margin-top: -1px;\t   background-color: #f8f8f8;\t   border: 1px solid #c5c5c5;\t   border-radius: 4px;\t   display: none;\t   overflow: auto;   }   image-selector.expanded .image-selector-options-list {\t   display: block;   }   .image-selector-option {\t   width: auto;\t   min-width: 40px;\t   height: auto;\t   display: flex;\t   flex: auto;\t   margin: auto;\t   padding: 4px 10px;\t   line-height: normal;\t   white-space: nowrap;\t   user-select: none;\t   cursor: pointer;   }   .image-selector-option:hover {\t   background-color: #f0f0f0;   }   .image-selector-option-image {\t   width: 18px default;\t   height: 18px;\t   flex: none;\t   margin-top: auto;\t   margin-bottom: auto;   }   .image-selector-option-text {\t   margin: auto auto auto 0;\t   line-height: 18px;   }   .image-selector-css-hidden {       display: none !important;   }   .image-selector-css-mr-10 {       margin-right: 10px;   }</style><div class="image-selector">   <span class="image-selector-selection">\t   <div class="image-selector-option-image"></div>\t   <span class="image-selector-selection-text"></span>   </span>   <div class="image-selector-arrow"></div></div><span class="image-selector-options-list">\t '+e+"</span>"},createOption:function(e,t,o){return'<div class="image-selector-option" id="'+e+(t?'" title="'+t:"")+(o?'" image="'+o:"")+'">'+(o?'    <img class="image-selector-option-image '+(t?"image-selector-css-mr-10":"")+'" src="'+o+'" alt="'+e.toUpperCase()+'"/>':"")+'    <span class="image-selector-option-text '+(t?"":"image-selector-css-hidden ")+'">'+t+"</span></div>"},createOptionBeforeInit:function(e,t,o){return'<image-option id="'+e+(t?'" title="'+t:"")+(o?'" image="'+o:"")+'"></image-option>'},addOptionItems:function(e,t){imageSelectorHelper.html(e,t),ImageSelector.init([e])}};document.addEventListener("DOMContentLoaded",function(e){ImageSelector.init(imageSelectorHelper.findAllImageSelectors())});var _ImageSelectorHelper=new function(){return{isOutOfViewport:function(e,t){var o=e.getBoundingClientRect(),i={};return i.top=o.top<0,i.left=o.left<0,i.bottom=o.bottom>(window.innerHeight||document.documentElement.clientHeight),i.right=o.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i.all=i.top&&i.left&&i.bottom&&i.right,t&&(e.style.top="",e.style.right="",e.style.bottom="",e.style.left=""),i},isFunction:function(e){return e&&"function"==typeof e},toggleClass:function(e,t,o){e&&e.length&&e.length>0?imageSelectorHelper.each(e,function(e,i){o?i.classList.contains(t)||i.classList.add(t):i.classList.remove(t)}):e&&e.classList&&(o?e.classList.contains(t)||e.classList.add(t):e.classList.remove(t))},each:function(e,t){if(e&&"function"==typeof t)for(var o=0;o<e.length;o++)t(o,e[o])},eventsHandler:function(e,t,o,i){if(o&&!Array.isArray(o)&&!NodeList.prototype.isPrototypeOf(o)){var n=[];n.push(o),o=n}var r=t.split(" ");imageSelectorHelper.each(r,function(t,n){imageSelectorHelper.each(o,function(t,o){"addEventListener"===e?o.attachEvent?(o["e"+n+i]=i,o[n+i]=function(){o["e"+n+i](window.event)},o.attachEvent("on"+n,o[n+i])):o.addEventListener(n,i,!1):"removeEventListener"===e&&(o.detachEvent?(o["e"+n+i]=i,o[n+i]=function(){o["e"+n+i](window.event)},o.attachEvent("on"+n,o[n+i])):o.removeEventListener(n,i,!1))})})},off:function(e,t,o){this.eventsHandler("removeEventListener",e,t,o)},on:function(e,t,o){this.eventsHandler("addEventListener",e,t,o)},offOn:function(e,t,o){this.off(e,t,o),this.on(e,t,o)},html:function(e,t){if(!t)return e.innerHTML;e.innerHTML=t},text:function(e,t){if(!t)return e.innerText;e.innerText=t},findAllImageSelectors:function(){return document.querySelectorAll("image-selector")},findAllOptions:function(e){var t=e.querySelectorAll("image-option");return t=t.length>0?t:e.querySelectorAll(".image-selector-option")},findOptionById:function(e,t){var o=e.querySelectorAll('image-option[id="'+t+'"]');return(o=o.length>0?o:e.querySelector('.image-selector-option[id="'+t+'"]')).length>0&&(o=o[0]),o},findClosestSelector:function(e){return e&&"image-selector"===e.tagName.toLowerCase()?e:e&&e.parentNode?this.findClosestSelector(e.parentNode):void 0},findOptionsList:function(e){var t=e.querySelectorAll(".image-selector-options-list");return t.length>0?t[0]:null},findCurrentSelection:function(e){return e.querySelector(".image-selector-selection")}}},imageSelectorHelper=_ImageSelectorHelper;
